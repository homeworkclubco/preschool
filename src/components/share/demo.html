<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PS Share Component - Demo</title>
        <link rel="stylesheet" href="../../styles/index.css" />
        <style>
            * {
                box-sizing: border-box;
            }

            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
                    'Helvetica Neue', Arial, sans-serif;
                line-height: 1.6;
                max-width: 1200px;
                margin: 0 auto;
                padding: 2rem;
                background: #f9fafb;
                color: #0a0a0a;
            }

            h1 {
                margin-bottom: 0.5rem;
            }

            .subtitle {
                color: #6b7280;
                margin-bottom: 3rem;
            }

            .demo-section {
                background: white;
                border-radius: 0.5rem;
                padding: 2rem;
                margin-bottom: 2rem;
                box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            }

            .demo-section h2 {
                margin-top: 0;
                border-bottom: 2px solid #e5e7eb;
                padding-bottom: 0.5rem;
                margin-bottom: 1.5rem;
            }

            .demo-section h3 {
                margin-top: 2rem;
                margin-bottom: 1rem;
                color: #374151;
            }

            .demo-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            .demo-item {
                padding: 1.5rem;
                border: 1px solid #e5e7eb;
                border-radius: 0.375rem;
                background: #fafafa;
            }

            .demo-item h4 {
                margin-top: 0;
                margin-bottom: 1rem;
                font-size: 0.875rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                color: #6b7280;
            }

            .demo-actions {
                display: flex;
                flex-wrap: wrap;
                gap: 1rem;
                align-items: center;
            }

            code {
                background: #f3f4f6;
                padding: 0.125rem 0.375rem;
                border-radius: 0.25rem;
                font-family: 'Courier New', monospace;
                font-size: 0.875em;
            }

            pre {
                background: #1f2937;
                color: #f9fafb;
                padding: 1rem;
                border-radius: 0.375rem;
                overflow-x: auto;
                font-size: 0.875rem;
            }

            pre code {
                background: transparent;
                padding: 0;
                color: inherit;
            }

            .info-box {
                background: #eff6ff;
                border-left: 4px solid #3b82f6;
                padding: 1rem;
                border-radius: 0.25rem;
                margin-bottom: 1.5rem;
            }

            .info-box p {
                margin: 0;
            }

            .custom-button {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                padding: 0.75rem 1.5rem;
                border-radius: 0.5rem;
                font-weight: 600;
                cursor: pointer;
                transition: transform 0.2s ease;
                min-height: 44px;
            }

            .custom-button:hover {
                transform: translateY(-2px);
            }

            .custom-button:active {
                transform: translateY(0);
            }

            /* Custom styling examples */
            ps-share.primary {
                --ps-share-bg: #3b82f6;
                --ps-share-bg-hover: #2563eb;
                --ps-share-bg-active: #1d4ed8;
                --ps-share-color: white;
                --ps-share-color-hover: white;
                --ps-share-border-color: #3b82f6;
                --ps-share-icon-color: white;
            }

            ps-share.success {
                --ps-share-bg: #10b981;
                --ps-share-bg-hover: #059669;
                --ps-share-bg-active: #047857;
                --ps-share-color: white;
                --ps-share-color-hover: white;
                --ps-share-border-color: #10b981;
                --ps-share-icon-color: white;
            }

            ps-share.outline {
                --ps-share-bg: transparent;
                --ps-share-bg-hover: #f3f4f6;
                --ps-share-bg-active: #e5e7eb;
                --ps-share-color: #374151;
                --ps-share-color-hover: #1f2937;
                --ps-share-border-color: #d1d5db;
            }

            ps-share.large {
                --ps-share-padding-block: 1rem;
                --ps-share-padding-inline: 1.5rem;
                --ps-share-font-size: 1.125rem;
                --ps-share-icon-size: 1.5rem;
            }

            ps-share.small {
                --ps-share-padding-block: 0.5rem;
                --ps-share-padding-inline: 0.75rem;
                --ps-share-font-size: 0.875rem;
                --ps-share-icon-size: 1rem;
            }

            ps-share.rounded {
                --ps-share-border-radius: 9999px;
            }

            .event-log {
                background: #f9fafb;
                border: 1px solid #e5e7eb;
                border-radius: 0.375rem;
                padding: 1rem;
                max-height: 300px;
                overflow-y: auto;
                font-family: 'Courier New', monospace;
                font-size: 0.875rem;
            }

            .event-log-entry {
                padding: 0.5rem;
                margin-bottom: 0.5rem;
                background: white;
                border-radius: 0.25rem;
                border-left: 3px solid #3b82f6;
            }

            .event-log-entry.success {
                border-left-color: #10b981;
            }

            .event-log-entry.error {
                border-left-color: #ef4444;
            }

            .event-log-time {
                color: #6b7280;
                font-size: 0.75rem;
            }

            .clear-log {
                background: #6b7280;
                color: white;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 0.25rem;
                cursor: pointer;
                margin-bottom: 1rem;
            }

            .clear-log:hover {
                background: #4b5563;
            }
        </style>
    </head>
    <body>
        <div class="space-md">hello</div>
        <h1>PS Share Component</h1>
        <p class="subtitle">
            An accessible share button with Web Share API support and clipboard
            fallback
        </p>

        <div class="info-box">
            <p>
                <strong>Note:</strong> The Web Share API only works in secure
                contexts (HTTPS) and may not be available on all
                browsers/devices. This component automatically falls back to
                clipboard copy when the API is unavailable.
            </p>
        </div>

        <!-- Basic Usage -->
        <div class="demo-section">
            <h2>Basic Usage</h2>

            <div class="demo-grid">
                <div class="demo-item">
                    <h4>Default Button</h4>
                    <ps-share
                        label="Share this page"
                        url="https://example.com"
                        text="Check out this awesome page!"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Text Only</h4>
                    <ps-share
                        label="Share text"
                        text="Hello, World! This is some shareable text."
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>URL Only</h4>
                    <ps-share
                        label="Share link"
                        url="https://example.com"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Disabled State</h4>
                    <ps-share
                        label="Share"
                        text="This button is disabled"
                        disabled
                    ></ps-share>
                </div>
            </div>

            <h3>Code Example</h3>
            <pre><code>&lt;ps-share
  label="Share this page"
  url="https://example.com"
  text="Check out this awesome page!"
&gt;&lt;/ps-share&gt;</code></pre>
        </div>

        <!-- Feedback Placement -->
        <div class="demo-section">
            <h2>Feedback Placement</h2>
            <p>Control where the "Copied!" feedback appears</p>

            <div class="demo-grid">
                <div class="demo-item">
                    <h4>Top (Default)</h4>
                    <ps-share
                        label="Share"
                        text="Feedback on top"
                        feedback-placement="top"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Bottom</h4>
                    <ps-share
                        label="Share"
                        text="Feedback on bottom"
                        feedback-placement="bottom"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Left</h4>
                    <ps-share
                        label="Share"
                        text="Feedback on left"
                        feedback-placement="left"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Right</h4>
                    <ps-share
                        label="Share"
                        text="Feedback on right"
                        feedback-placement="right"
                    ></ps-share>
                </div>
            </div>

            <h3>Code Example</h3>
            <pre><code>&lt;ps-share
  label="Share"
  text="Content to share"
  feedback-placement="bottom"
&gt;&lt;/ps-share&gt;</code></pre>
        </div>

        <!-- Custom Styling -->
        <div class="demo-section">
            <h2>Custom Styling with CSS Variables</h2>

            <div class="demo-grid">
                <div class="demo-item">
                    <h4>Primary Style</h4>
                    <ps-share
                        class="primary"
                        label="Share"
                        text="Primary styled button"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Success Style</h4>
                    <ps-share
                        class="success"
                        label="Share"
                        text="Success styled button"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Outline Style</h4>
                    <ps-share
                        class="outline"
                        label="Share"
                        text="Outline styled button"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Large Size</h4>
                    <ps-share
                        class="large"
                        label="Share"
                        text="Large button"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Small Size</h4>
                    <ps-share
                        class="small"
                        label="Share"
                        text="Small button"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Rounded</h4>
                    <ps-share
                        class="rounded primary"
                        label="Share"
                        text="Rounded button"
                    ></ps-share>
                </div>
            </div>

            <h3>Code Example</h3>
            <pre><code>ps-share.primary {
  --ps-share-bg: #3b82f6;
  --ps-share-bg-hover: #2563eb;
  --ps-share-color: white;
  --ps-share-border-color: #3b82f6;
}

&lt;ps-share class="primary" label="Share"&gt;&lt;/ps-share&gt;</code></pre>
        </div>

        <!-- Custom Button Content -->
        <div class="demo-section">
            <h2>Custom Button Content</h2>
            <p>Use the default slot to provide your own button element</p>

            <div class="demo-actions">
                <ps-share
                    label="Share with custom button"
                    text="This uses a custom button!"
                    url="https://example.com"
                >
                    <button class="custom-button">
                        ðŸš€ Share This Awesome Content!
                    </button>
                </ps-share>
            </div>

            <h3>Code Example</h3>
            <pre><code>&lt;ps-share label="Share" text="Content" url="https://example.com"&gt;
  &lt;button class="custom-button"&gt;
    ðŸš€ Share This Awesome Content!
  &lt;/button&gt;
&lt;/ps-share&gt;</code></pre>
        </div>

        <!-- Custom Feedback Text -->
        <div class="demo-section">
            <h2>Custom Feedback Text</h2>

            <div class="demo-grid">
                <div class="demo-item">
                    <h4>Custom Message</h4>
                    <ps-share
                        label="Share"
                        text="Custom feedback example"
                        feedback-text="Link copied! âœ“"
                    ></ps-share>
                </div>

                <div class="demo-item">
                    <h4>Emoji Feedback</h4>
                    <ps-share
                        label="Share"
                        text="Emoji feedback example"
                        feedback-text="Copied! ðŸŽ‰"
                    ></ps-share>
                </div>
            </div>

            <h3>Code Example</h3>
            <pre><code>&lt;ps-share
  label="Share"
  text="Content"
  feedback-text="Link copied! âœ“"
&gt;&lt;/ps-share&gt;</code></pre>
        </div>

        <!-- Event Handling -->
        <div class="demo-section">
            <h2>Event Handling</h2>
            <p>
                The component fires events for successful shares, clipboard
                copies, and errors
            </p>

            <div class="demo-actions">
                <ps-share
                    id="event-share"
                    label="Share"
                    text="Try sharing this to see events"
                    url="https://example.com"
                ></ps-share>
            </div>

            <h3>Event Log</h3>
            <button class="clear-log" onclick="clearEventLog()">
                Clear Log
            </button>
            <div id="event-log" class="event-log">
                <p style="color: #6b7280">Events will appear here...</p>
            </div>

            <h3>Code Example</h3>
            <pre><code>const shareButton = document.querySelector('ps-share');

// Listen for successful Web Share API usage
shareButton.addEventListener('ps-share-success', (e) => {
  console.log('Shared via:', e.detail.method);
  console.log('Data:', e.detail.data);
});

// Listen for clipboard copy fallback
shareButton.addEventListener('ps-share-copy', (e) => {
  console.log('Copied via:', e.detail.method);
  console.log('Text:', e.detail.text);
});

// Listen for errors
shareButton.addEventListener('ps-share-error', (e) => {
  console.error('Error:', e.detail.message);
});</code></pre>
        </div>

        <!-- Programmatic Usage -->
        <div class="demo-section">
            <h2>Programmatic Usage</h2>
            <p>Trigger sharing programmatically via JavaScript</p>

            <div class="demo-actions">
                <ps-share
                    id="programmatic-share"
                    label="Share"
                    text="Triggered programmatically"
                ></ps-share>
                <button
                    onclick="triggerShare()"
                    style="
                        padding: 0.75rem 1.5rem;
                        background: #6b7280;
                        color: white;
                        border: none;
                        border-radius: 0.375rem;
                        cursor: pointer;
                    "
                >
                    Trigger Share via JavaScript
                </button>
            </div>

            <h3>Code Example</h3>
            <pre><code>const shareButton = document.querySelector('#programmatic-share');
shareButton.share(); // Programmatically trigger share</code></pre>
        </div>

        <!-- Accessibility -->
        <div class="demo-section">
            <h2>Accessibility Features</h2>
            <ul>
                <li>
                    <strong>Keyboard Navigation:</strong> Fully accessible via
                    keyboard (Tab, Enter, Space)
                </li>
                <li>
                    <strong>ARIA Labels:</strong> Proper labeling for screen
                    readers
                </li>
                <li>
                    <strong>Live Regions:</strong> Screen reader announcements
                    for share/copy actions
                </li>
                <li>
                    <strong>Focus Indicators:</strong> Clear focus ring with 3:1
                    contrast minimum
                </li>
                <li>
                    <strong>Touch Targets:</strong> Minimum 44x44px touch target
                    size
                </li>
                <li>
                    <strong>Reduced Motion:</strong> Respects
                    prefers-reduced-motion preference
                </li>
                <li>
                    <strong>Disabled State:</strong> Properly communicated to
                    assistive technologies
                </li>
            </ul>
        </div>

        <!-- CSS Custom Properties Reference -->
        <div class="demo-section">
            <h2>CSS Custom Properties Reference</h2>
            <table
                style="
                    width: 100%;
                    border-collapse: collapse;
                    font-size: 0.875rem;
                "
            >
                <thead>
                    <tr style="background: #f3f4f6; text-align: left">
                        <th style="padding: 0.75rem; border: 1px solid #e5e7eb">
                            Property
                        </th>
                        <th style="padding: 0.75rem; border: 1px solid #e5e7eb">
                            Description
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            <code>--ps-share-bg</code>
                        </td>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            Background color
                        </td>
                    </tr>
                    <tr>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            <code>--ps-share-color</code>
                        </td>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            Text color
                        </td>
                    </tr>
                    <tr>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            <code>--ps-share-border-radius</code>
                        </td>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            Border radius
                        </td>
                    </tr>
                    <tr>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            <code>--ps-share-font-size</code>
                        </td>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            Font size
                        </td>
                    </tr>
                    <tr>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            <code>--ps-share-icon-size</code>
                        </td>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            Icon size
                        </td>
                    </tr>
                    <tr>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            <code>--ps-share-feedback-placement</code>
                        </td>
                        <td
                            style="
                                padding: 0.5rem 0.75rem;
                                border: 1px solid #e5e7eb;
                            "
                        >
                            Feedback position offset
                        </td>
                    </tr>
                </tbody>
            </table>
            <p style="margin-top: 1rem; font-size: 0.875rem; color: #6b7280">
                See the README for a complete list of all CSS custom properties
            </p>
        </div>

        <!-- Import the component -->
        <script type="module">
            import { PsShare } from './ps-share.ts';

            // Event logging
            const eventShare = document.getElementById('event-share');
            const eventLog = document.getElementById('event-log');

            function logEvent(type, detail, className = '') {
                const entry = document.createElement('div');
                entry.className = `event-log-entry ${className}`;

                const time = new Date().toLocaleTimeString();
                entry.innerHTML = `
                    <div class="event-log-time">${time}</div>
                    <strong>${type}</strong>
                    <pre style="margin: 0.5rem 0 0; font-size: 0.75rem; white-space: pre-wrap;">${JSON.stringify(detail, null, 2)}</pre>
                `;

                // Clear placeholder
                if (eventLog.children[0]?.tagName === 'P') {
                    eventLog.innerHTML = '';
                }

                eventLog.insertBefore(entry, eventLog.firstChild);
            }

            eventShare.addEventListener('ps-share-success', e => {
                logEvent('ps-share-success', e.detail, 'success');
            });

            eventShare.addEventListener('ps-share-copy', e => {
                logEvent('ps-share-copy', e.detail, 'success');
            });

            eventShare.addEventListener('ps-share-error', e => {
                logEvent('ps-share-error', e.detail, 'error');
            });

            // Programmatic share
            window.triggerShare = () => {
                const shareButton =
                    document.getElementById('programmatic-share');
                shareButton.share();
            };

            window.clearEventLog = () => {
                eventLog.innerHTML =
                    '<p style="color: #6b7280">Events will appear here...</p>';
            };
        </script>
    </body>
</html>
