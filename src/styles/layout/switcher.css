/* --------------------------------------
 * Switcher
 * 
 * A layout that switches between horizontal and vertical layouts based
 * on available space. Items are horizontal above a threshold, stacked below.
 * 
 * Usage:
 *   <div class="switcher">
 *     <div>Item 1</div>
 *     <div>Item 2</div>
 *     <div>Item 3</div>
 *   </div>
 * 
 * Custom properties:
 * - --switcher-space: Gap between elements (default: var(--spacing-md))
 * - --switcher-threshold: Container width to switch layout (default: 600px)
 * - --switcher-limit: Max number of items per row (default: 4)
 * - --switcher-align: Align items (default: stretch)
 *
 * Modifiers:
 * - switcher--space-*: Sets gap between elements
 * - switcher--threshold-*: Sets container width to switch layout
 * - switcher--limit-*: Sets max number of items per row
 * - switcher--align-*: Sets alignment of items
 * -------------------------------------- */

.switcher {
    --_switcher-space: var(--switcher-space, var(--spacing-md));
    --_switcher-threshold: var(--switcher-threshold, 600px);
    --_switcher-limit: var(--switcher-limit, 4);
    --_switcher-align: var(--switcher-align, stretch);

    display: flex;
    flex-wrap: wrap;
    gap: var(--_switcher-space);
    align-items: var(--_switcher-align);
}

.switcher > * {
    flex-grow: 1;
    flex-basis: calc((var(--_switcher-threshold) - 100%) * 999);
    max-inline-size: calc(100% / var(--_switcher-limit) - var(--_switcher-space));
}

/* No grow - items stay at their natural width */
.switcher--no-grow > * {
    flex-grow: 0;
}

@ruler utility ({
    selector: '.switcher--space',
    property: '--switcher-space',
    scale: 'space',
    generateAllCrossPairs: true,
});

/* Threshold presets */
.switcher--threshold-sm {
    --switcher-threshold: 400px;
}
.switcher--threshold-md {
    --switcher-threshold: 600px;
}
.switcher--threshold-lg {
    --switcher-threshold: 800px;
}
.switcher--threshold-xl {
    --switcher-threshold: 1000px;
}

/* Item limit presets */
.switcher--limit-2 {
    --switcher-limit: 2;
}
.switcher--limit-3 {
    --switcher-limit: 3;
}
.switcher--limit-4 {
    --switcher-limit: 4;
}
.switcher--limit-5 {
    --switcher-limit: 5;
}

/* Alignment modifiers */
.switcher--align-start {
    --switcher-align: flex-start;
}
.switcher--align-center {
    --switcher-align: center;
}
.switcher--align-end {
    --switcher-align: flex-end;
}
.switcher--align-stretch {
    --switcher-align: stretch;
}
