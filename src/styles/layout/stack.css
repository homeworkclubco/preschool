/* --------------------------------------
 * Stack
 * 
 * A layout that arranges elements vertically with optional spacing and 
 * splitting functionality. The base stack only applies spacing to direct 
 * children, while the recursive variant applies spacing to all nested children.
 * 
 * Default behavior:
 * - Only direct children get spacing
 * - No splitting functionality
 * - Full height if only child
 * 
 * Usage:
 *   <div class="stack stack-space-l">
 *     <div>Item 1</div>
 *     <div>Item 2</div>
 *     <div>Item 3</div>
 *   </div>
 * 
 * Custom properties:
 * - --stack-space: Gap between elements (default: var(--space-sm))
 * - --stack-split: Which child gets extra space (default: null)
 * 
 * Modifiers:
 * - stack-space-*: Sets spacing between elements
 * - stack--recursive: Applies spacing to all nested children
 * -------------------------------------- */

.stack {
    --_stack-space: var(--stack-space, var(--space-lg));

    > * {
        margin-block: 0;
    }

    > * + * {
        margin-block-start: var(--_stack-space);
    }
}

@ruler utility({
    selector: '.stack--space',
    property: '--stack-space',
    scale: 'space',
    generateAllCrossPairs: true,
});

/* Split functionality - nth-child gets extra space */
/* .stack[style*='--stack-split'] > :nth-child(var(--stack-split)) {
    margin-block-end: auto;
} */

/* Recursive variant - all nested children get spacing */
.stack--recursive * + * {
    margin-block-start: var(--_stack-space);
}

/* Full height if only child */
.stack:only-child {
    block-size: 100%;
}
