/* --------------------------------------
 * SIDEBAR LAYOUT
   * 
   * A layout for placing two elements side-by-side. When space permits, the sidebar 
   * element has a set width and the content element takes up the remaining space. 
   * When space is constrained, elements collapse into a single column.
   * 
   * Default behavior:
   * - Left sidebar with content-based width
   * - Content element has 50% minimum width
   * - Elements stretch to equal height
   * 
   * Usage:
   *   <div class="sidebar sidebar-width-64 sidebar-space-l">
   *     <aside>Sidebar content</aside>
   *     <main>Main content</main>
   *   </div>
   * 
   * Custom properties:
   * - --sidebar-side-width: Width of sidebar when adjacent (default: content-based)
   * - --sidebar-content-min: Minimum width of content element (default: 50%)  
   * - --sidebar-space: Gap between elements (default: var(--spacing-sm))
   * - --sidebar-side: Which side the sidebar appears on (default: left)
   * 
   * Modifiers:
   * - sidebar-width-*: Sets fixed width for sidebar element
   * - sidebar-content-min-*: Sets minimum width for content (use percentages)
   * - sidebar-space-*: Controls gap between elements
   * - sidebar-side-left/right: Controls sidebar placement
   * - sidebar-no-stretch: Prevents equal height stretching
 * -------------------------------------- */
@layer base {
	.sidebar {
		--sidebar-side-width: null;
		--sidebar-content-min: 50%;
		--sidebar-space: var(--spacing-sm);
		--sidebar-side: left;

		display: flex;
		flex-wrap: wrap;
		gap: var(--sidebar-space);
	}

	/* Default: both elements flexible */
	.sidebar > * {
		flex-basis: var(--sidebar-side-width, auto);
	}

	/* Content element (grows and has min-width) */
	.sidebar > :last-child {
		flex-basis: 0;
		flex-grow: 999;
		min-inline-size: var(--sidebar-content-min);
	}

	/* When side="right", content is first child */
	.sidebar[style*="--sidebar-side: right"] > :first-child {
		flex-basis: 0;
		flex-grow: 999;
		min-inline-size: var(--sidebar-content-min);
	}

	.sidebar[style*="--sidebar-side: right"] > :last-child {
		flex-basis: var(--sidebar-side-width, auto);
	}

	/* No stretch option */
	.sidebar-no-stretch {
		align-items: flex-start;
	}
}

@utility sidebar-space-* {
	--sidebar-space: --value(--spacing-*);
}

@utility sidebar-side-left {
	--sidebar-side: left;
}
@utility sidebar-side-right {
	--sidebar-side: right;
}

@utility sidebar-content-min-* {
	--sidebar-content-min: *;
}

@utility sidebar-width-* {
	--sidebar-side-width: --value(--size-*);
}

@utility sidebar-no-stretch {
	align-items: flex-start;
}
